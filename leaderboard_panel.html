<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="csrf-token" content="KZOeBpgAQsYWpkm1YzfzUwl8UpGrD5dNGiLSqZ3S" />
    <title>Leaderboard Panel</title>
    <meta name="googlebot" content="noindex">
    <meta name="robots" content="noindex">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://kit.fontawesome.com/fa489de302.js" crossorigin="anonymous"></script>
    <style>
        /* General Body and Container Styles */
        body {
            background-color: #1a1a1a;
            color: #fff;
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
            padding: 20px;
            box-sizing: border-box;
        }

        /* Login Container Styles */
        .login-container {
            background-color: #333;
            border: 3px #FF920C groove;
            border-radius: 10px;
            padding: 30px;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 0 15px rgba(255, 146, 12, 0.7);
            text-align: center;
            margin-top: 50px;
        }

        .login-container h2 {
            color: #FF920C;
            margin-bottom: 25px;
            text-shadow: 0 0 5px #FF920C;
        }

        .login-container .form-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .login-container label {
            display: block;
            margin-bottom: 8px;
            color: #fff;
        }

        .login-container input[type="text"],
        .login-container input[type="password"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #FF920C;
            background-color: #222;
            color: #fff;
            border-radius: 5px;
        }

        .login-container button {
            background-color: #FF920C;
            color: #fff;
            padding: 10px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            width: 100%;
            margin-top: 15px;
        }

        .login-container button:hover {
            background-color: #e08200;
        }

        .login-error {
            color: #dc3545;
            margin-top: 15px;
            font-weight: bold;
        }

        /* Styling for the panel after login */
        #main-panel-content {
            display: none;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 20px;
        }

        /* Re-applying core styles from previous example for consistency */
        .ardframe {
            border: 3px #FF920C groove;
            border-radius: 10px;
            padding: 10px;
            background-color: #333;
        }

        .title-container {
            width: 100%;
            max-width: 800px;
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .title {
            text-align: center;
        }

        .title h1 {
            font-size: 3em;
            color: #FF920C;
            text-shadow: 0 0 5px #FF920C, 0 0 10px rgba(255, 146, 12, 0.5);
            margin: 0;
            padding: 0;
            text-transform: uppercase;
        }

        .marquee {
            line-height: 30px;
            width: 75.5%;
            overflow: hidden;
            position: relative;
            height: 30px;
            background: #000;
            border: 1px solid #FF920C;
            border-radius: 5px;
        }

        .marquee-content {
            position: absolute;
            white-space: nowrap;
            will-change: transform;
            font-size: 16px;
            color: #fff;
            animation: marquee 50s linear infinite;
        }

        @keyframes marquee {
            from {
                transform: translateX(55%);
            }

            to {
                transform: translateX(-100%);
            }
        }

        .marquee:hover .marquee-content {
            animation-play-state: paused
        }

        @media (max-width:600px) {
            .marquee {
                width: 90%;
            }

            .marquee-content {
                font-size: 15px;
                animation: marquee 40s linear infinite;
            }

            @keyframes marquee {
                from {
                    transform: translateX(25%);
                }

                to {
                    transform: translateX(-100%);
                }
            }
        }

        /* Admin Panel specific styles */
        .admin-panel {
            background-color: #4a4a4a;
            border: 3px #d0a859 groove;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            width: 100%;
            max-width: 600px;
            box-shadow: 0 0 15px rgba(208, 168, 89, 0.7);
        }

        .admin-panel h3 {
            text-align: center;
            color: #FF920C;
            margin-bottom: 20px;
            text-shadow: 0 0 5px #FF920C;
        }

        .admin-panel .form-group {
            margin-bottom: 15px;
        }

        .admin-panel label {
            display: block;
            margin-bottom: 5px;
            color: #fff;
        }

        .admin-panel input[type="text"],
        .admin-panel input[type="number"],
        .admin-panel input[type="date"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #FF920C;
            background-color: #222;
            color: #fff;
            border-radius: 5px;
        }

        .admin-panel button {
            background-color: #008000;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        .admin-panel button:hover {
            background-color: #00aa00;
        }

        .admin-panel button.update-btn {
            background-color: #007bff;
            margin-top: 5px;
        }

        .admin-panel button.update-btn:hover {
            background-color: #0056b3;
        }

        .admin-panel button.delete-btn {
            background-color: #dc3545;
            margin-top: 5px;
        }

        .admin-panel button.delete-btn:hover {
            background-color: #a71d2a;
        }

        /* Admin ID List Table */
        .admin-id-list {
            margin-top: 20px;
            background-color: #3d3d3d;
            border: 1px solid #FF920C;
            border-radius: 8px;
            padding: 10px;
        }

        .admin-id-list h4 {
            color: #FF920C;
            text-align: center;
            margin-bottom: 15px;
            text-shadow: 0 0 3px #FF920C;
        }

        .admin-id-list table {
            width: 100%;
            border-collapse: collapse;
        }

        .admin-id-list th,
        .admin-id-list td {
            border: 1px solid #555;
            padding: 8px;
            text-align: left;
            color: #fff;
        }

        .admin-id-list th {
            background-color: #555;
            color: #FF920C;
        }

        /* Leaderboard Table Styles */
        .checkpoin {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #333;
            box-shadow: 0 0 15px rgba(255, 146, 12, 0.7);
        }

        .search {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .search input {
            flex-grow: 1;
            padding: 8px;
            border: 3px #FF920C groove;
            background-color: #222;
            color: #fff;
            border-radius: 10px;
        }

        .search div[role="button"] {
            background-color: #FF920C;
            padding: 8px 15px;
            border-radius: 10px;
            cursor: pointer;
        }

        .search div[role="button"] img {
            height: 24px;
        }

        .ardboard {
            margin-top: 20px;
        }

        .table-ard {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
        }

        .table-ard-container {
            max-height: 350px;
            overflow-y: auto;
            border: 3px #FF920C groove;
            border-radius: 10px;
        }

        .table-ard thead th {
            font-family: 'Anek Latin', sans-serif;
            text-shadow: 0 0 3px #000, 0 0 5px #000;
            border: 3px #FF920C groove;
            color: #fff;
            padding: 10px;
            text-align: center;
            vertical-align: middle;
            border-radius: 10px;
            background-color: #555;
            padding: 15px 10px;
            font-size: 18px !important;
            border-bottom: 1px solid white;
            filter: drop-shadow(1px 2px 6px gold);
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .table-ard tbody td {
            font-family: 'Anek Latin', sans-serif;
            text-shadow: 0 0 3px #000, 0 0 5px #000;
            border: 3px #FF920C groove;
            color: #fff;
            padding: 8px;
            text-align: center;
            vertical-align: middle;
            border-radius: 10px;
        }

        .table-ard tbody tr:nth-child(odd) {
            background-color: #444;
        }

        .table-ard tbody tr:nth-child(even) {
            background-color: #3d3d3d;
        }

        .btn-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
        }

        .btn-to {
            border-radius: 10px;
            padding: 8px 15px;
            text-shadow: 0 0 3px #000, 0 0 5px #000;
            border: 3px #FF920C groove;
            color: #fff;
            cursor: pointer;
            flex: 1;
            max-width: 200px;
            text-align: center;
            display: none;
        }

        .reward-image-container {
            width: 100%;
            text-align: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }

        .reward-image-container img {
            max-width: 100%;
            height: auto;
            border: 3px #FF920C groove;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(255, 146, 12, 0.7);
        }

        @media (max-width: 767px) {
            .checkpoin,
            .admin-panel {
                width: 95%;
                padding: 15px;
            }

            .title h1 {
                font-size: 2.2em;
            }

            .search input,
            .admin-panel input,
            .admin-panel button {
                font-size: 0.9em;
                padding: 6px;
            }

            .table-ard th,
            .table-ard td {
                font-size: 0.8em !important;
                padding: 6px;
            }

            .btn-to,
            .btn-depo {
                padding: 6px 10px;
                font-size: 0.9em;
            }

            .marquee {
                width: 90%;
            }
        }
    </style>
</head>

<body>
    <div class="login-container" id="login-form">
        <h2>ADMIN LOGIN</h2>
        <div class="form-group">
            <label for="username">ID Pengguna:</label>
            <input type="text" id="username" placeholder="Masukkan ID Pengguna">
        </div>
        <div class="form-group">
            <label for="password">Kata Sandi:</label>
            <input type="password" id="password" placeholder="Masukkan Kata Sandi">
        </div>
        <button onclick="checkLogin()">Login</button>
        <p class="login-error" id="login-error-message" style="display: none;">ID Pengguna atau Kata Sandi salah!</p>
    </div>

    <div id="main-panel-content" style="display: none;">
        <div class="title-container">
            <div class="title rsive">
                <h1>LEADERBOARD</h1>
            </div>
            <center style="width: 100%;">
                <div class="marquee">
                    <div class="marquee-content">
                        <b> UPDATE POINT LEADERBOARD PAS JACKPOT </b>
                    </div>
                </div>
            </center>
        </div>

        <div class="admin-panel">
            <h3>ADMIN LEADERBOARD PANEL</h3>
            <div class="form-group">
                <label for="admin_user_id">ID Player:</label>
                <input type="text" id="admin_user_id" placeholder="Masukkan ID Player">
            </div>
            <div class="form-group">
                <label for="admin_points">Poin:</label>
                <input type="number" id="admin_points" value="0" min="0">
            </div>
            <div class="form-group">
                <label for="admin_joined_date">Joined Date:</label>
                <input type="date" id="admin_joined_date">
            </div>
            <div class="form-group">
                <button onclick="addOrUpdatePlayer()">Tambah / Update Player</button>
                <button class="delete-btn" onclick="deletePlayer()">Hapus Player (berdasarkan ID)</button>
            </div>

            <div class="admin-id-list">
                <h4>Daftar ID Player (Full & Masked)</h4>
                <div style="max-height: 200px; overflow-y: auto;">
                    <table>
                        <thead>
                            <tr>
                                <th>ID Lengkap</th>
                                <th>ID Tersembunyi</th>
                            </tr>
                        </thead>
                        <tbody id="admin_id_list_body">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div class="ardframe rsive checkpoin">
            <div class="search">
                <input class="ardframe" maxlength="12" type="text" name="user" id="user" placeholder="USER ID">
                <div role="button" type="submit" onclick="searchLeaderboard()">
                    <img src="https://wall2.airbet88-vip.com/assets/desktop/search.webp" alt="Search">
                </div>
            </div>
            <main class="ardboard">
                <div id="klasemen">
                    <div class="card-body p-1 p-lg-3 rankto onn">
                        <div class="table-ard-container">
                            <table class="table-ard">
                                <thead>
                                    <tr>
                                        <th>
                                            <span>ID PLAYER</span>
                                        </th>
                                        <th>
                                            <span>POIN</span>
                                        </th>
                                        <th>
                                            <span>JOINED DATE</span>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="btn-container">
                    <div class="ard btn-to" role="button" onclick="showRewardList()">
                        <img src="https://cdn-master.it-cg.group/MONEYSITE/AI88%20VIP/Checkpoin/AIVIP006%20D.png"
                            alt="Reward List Image" style="max-width: 100%; height: auto; display: block;" />
                    </div>
                </div>
            </main>
        </div>

        <div class="layer2"
            style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:1000; justify-content:center; align-items:center;">
            <div class="ardframe reward"
                style="background-color:#333; padding:20px; border:3px #FF920C groove; border-radius:10px; max-width:600px; width:90%; box-shadow:0 0 20px rgba(255,146,12,0.8);">
                <div class="content-text">
                    <div id="carouselhadiah" class="carousel slide">
                        <div class="carousel-indicators">
                            <button type="button" data-bs-target="#carouselhadiah" data-bs-slide-to="0" class="active"
                                aria-current="true" aria-label="Slide 1"></button>
                            <button type="button" data-bs-target="#carouselhadiah" data-bs-slide-to="1"
                                aria-label="Slide 2"></button>
                        </div>
                        <div class="carousel-inner m-auto">
                            <div class="carousel-item active">
                                <img id="carouselImage1" src="" alt="1" class="desktop-image"
                                    style="max-width: 100%; height: auto; display: block; margin: auto;">
                            </div>
                            <div class="carousel-item">
                                <img id="carouselImage2" src="" alt="2" class="desktop-image"
                                    style="max-width: 100%; height: auto; display: block; margin: auto;">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselhadiah"
                            data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselhadiah"
                            data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                </div>
                <div class="btn-container" style="margin-top:20px;">
                    <div class="ardframe ard-close" onclick="hideRewardList()" role="button"
                        style="border: 3px #FF920C groove; border-radius: 10px; padding: 8px 15px; text-shadow: 0 0 3px #000, 0 0 5px #000; color: #fff; cursor:pointer; background-color:#555;">
                        CLOSE
                    </div>
                </div>
            </div>
        </div>
    </div> <script type="module">
        // Import Supabase Client
        import { createClient } from 'https://esm.sh/@supabase/supabase-js';

        // GANTI DENGAN PROJECT URL DAN ANON KEY DARI DASHBOARD SUPABASE KAMU
        const SUPABASE_URL = 'https://atfmpqijdplvpqofxnqt.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImF0Zm1wcWlqZHBsdnBxb2Z4bnF0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzMjM3OTgsImV4cCI6MjA2NTg5OTc5OH0.55M47VWHsZdzFcRB9-PB9sx12R76sIX70DKr2gZuauc'; 

        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // --- Leaderboard Data (Sekarang dari Supabase, bukan localStorage) ---
        let leaderboardData = []; 

        // --- Fungsi untuk Memformat Username (Masking) ---
        function maskUsername(username) {
            if (username.length <= 4) return username;
            return username.substring(0, 2) + "***" + username.substring(username.length - 2, username.length);
        }

        // --- Fungsi untuk Menampilkan Data Leaderboard dari Supabase ---
        async function fetchAndRenderLeaderboard() {
            const { data, error } = await supabase
                .from('leaderboard') // 'leaderboard' adalah nama tabel kamu di Supabase
                .select('*')
                .order('point', { ascending: false }); // Urutkan dari poin tertinggi

            if (error) {
                console.error('Error fetching leaderboard:', error.message);
                $('.table-ard tbody').html('<tr><td colspan="3" style="border: 3px #FF920C groove; color: red; text-align: center;">Error loading data: ' + error.message + '</td></tr>');
                leaderboardData = []; // Kosongkan data jika ada error
                return;
            }
            leaderboardData = data; // Update data lokal dengan yang dari Supabase
            renderLeaderboard(leaderboardData); // Panggil fungsi render HTML yang sudah ada
        }

        // Fungsi renderLeaderboard (tidak perlu diubah banyak, hanya menerima data)
        function renderLeaderboard(dataToShow) {
            let htmlView = '';
            const tbody = $('.table-ard tbody');

            if (dataToShow.length <= 0) {
                htmlView += `
                    <tr>
                        <td colspan="3" style="border: unset; border-radius: 10px; padding: 5px; text-shadow: 0 0 3px #000000, 0 0 5px #000000; border-color: #d0a859; color: #fff; border: 3px #FF920C groove; ">No data.</td>
                    </tr>`;
            } else {
                for (let i = 0; i < dataToShow.length; i++) {
                    let player = dataToShow[i];
                    htmlView +=
                        `<tr>
                            <td class="mb-3 table-ard-point position-relative"
                                style="border: unset; border-radius: 10px; padding: 5px; text-shadow: 0 0 3px #000000, 0 0 5px #000000; border-color: #d0a859; color: #fff; border: 3px #FF920C groove;">` +
                    maskUsername(player.username) + `</td>
                            <td class="mb-3 table-ard-point position-relative"
                                style="border: unset; border-radius: 10px; padding: 5px; text-shadow: 0 0 3px #000000, 0 0 5px #000000; border-color: #d0a859; color: #fff; border: 3px #FF920C groove;">` +
                    player.point + `</td>
                            <td class="mb-3 table-ard-point position-relative"
                                style="border: unset; border-radius: 10px; padding: 5px; text-shadow: 0 0 3px #000000, 0 0 5px #000000; border-color: #d0a859; color: #fff; border: 3px #FF920C groove;">` +
                    player.joined_date + `</td>
                        </tr>`;
                }
            }
            $('.table-ard tbody').html(htmlView);
        }

        // --- Fungsi untuk Menampilkan Data ID Admin dari Supabase ---
        async function renderAdminIdList() {
            let htmlView = '';
            const adminIdListBody = $('#admin_id_list_body');

            const { data: players, error } = await supabase
                .from('leaderboard')
                .select('username'); // Ambil hanya username

            if (error) {
                console.error('Error fetching admin list:', error.message);
                adminIdListBody.html('<tr><td colspan="2" style="text-align: center; color: red;">Error loading admin list.</td></tr>');
                return;
            }

            if (players.length <= 0) {
                htmlView += `
                    <tr>
                        <td colspan="2" style="text-align: center;">No player IDs added yet.</td>
                    </tr>`;
            } else {
                players.forEach(player => {
                    htmlView += `
                        <tr>
                            <td>${player.username}</td>
                            <td>${maskUsername(player.username)}</td>
                        </tr>
                    `;
                });
            }
            adminIdListBody.html(htmlView);
        }

        // --- Fungsi Pencarian Leaderboard ---
        function searchLeaderboard() {
            var keyword = $('#user').val().toLowerCase();
            let filteredData = leaderboardData.filter(player =>
                player.username.toLowerCase().includes(keyword) ||
                player.point.toString().includes(keyword) ||
                player.joined_date.includes(keyword)
            );
            renderLeaderboard(filteredData);
        }

        // --- Fungsi Panel Admin: Tambah / Update Player ke Supabase ---
        async function addOrUpdatePlayer() {
            let id = $('#admin_user_id').val().trim();
            let points = parseInt($('#admin_points').val());
            let date = $('#admin_joined_date').val();

            if (!id || isNaN(points) || !date) {
                alert("Semua field harus diisi dengan benar!");
                return;
            }

            // Format tanggal ke YYYY-MM-DD untuk Supabase
            // Jika inputnya DD-MM-YYYY, ubah dulu
            if (!date.includes('-') || date.split('-')[0].length === 2) { 
                const [day, month, year] = date.split('-');
                date = `${year}-${month}-${day}`;
            }

            // Cek apakah player sudah ada
            const { data: existingPlayer, error: fetchError } = await supabase
                .from('leaderboard')
                .select('id') // Hanya ambil ID jika ada
                .eq('username', id)
                .single(); // Mencari satu baris yang cocok

            if (fetchError && fetchError.code !== 'PGRST116') { // PGRST116 berarti 'No rows found'
                console.error('Error checking player:', fetchError.message);
                alert('Terjadi kesalahan saat memeriksa player: ' + fetchError.message);
                return;
            }

            let response;
            if (existingPlayer) {
                // Update player jika sudah ada
                response = await supabase
                    .from('leaderboard')
                    .update({ point: points, joined_date: date })
                    .eq('username', id);
            } else {
                // Insert new player jika belum ada
                response = await supabase
                    .from('leaderboard')
                    .insert([{ username: id, point: points, joined_date: date }]);
            }

            if (response.error) {
                console.error('Error saving player:', response.error.message);
                alert(`Gagal menyimpan player: ${response.error.message}`);
            } else {
                alert(`Player ${id} berhasil disimpan!`);
                await fetchAndRenderLeaderboard(); // Ambil data terbaru dan render ulang leaderboard
                await renderAdminIdList(); // Perbarui daftar ID admin
                clearAdminForm(); // Bersihkan form
            }
        }

        // --- Fungsi Panel Admin: Hapus Player dari Supabase ---
        async function deletePlayer() {
            let idToDelete = $('#admin_user_id').val().trim();

            if (!idToDelete) {
                alert("Masukkan ID Player yang ingin dihapus!");
                return;
            }

            const { error } = await supabase
                .from('leaderboard')
                .delete()
                .eq('username', idToDelete); // Hapus berdasarkan username

            if (error) {
                console.error('Error deleting player:', error.message);
                alert(`Gagal menghapus player: ${error.message}`);
            } else {
                alert(`Player ${idToDelete} berhasil dihapus!`);
                await fetchAndRenderLeaderboard(); // Ambil data terbaru dan render ulang leaderboard
                await renderAdminIdList(); // Perbarui daftar ID admin
                clearAdminForm(); // Bersihkan form
            }
        }

        // --- Fungsi untuk Membersihkan Form Admin ---
        function clearAdminForm() {
            $('#admin_user_id').val('');
            $('#admin_points').val('0');
            const today = new Date();
            const yyyy = today.getFullYear();
            const mm = String(today.getMonth() + 1).padStart(2, '0');
            const dd = String(today.getDate()).padStart(2, '0');
            $('#admin_joined_date').val(`${yyyy}-${mm}-${dd}`);
        }

        // --- Reward List Carousel Toggling (tetap ada meskipun tombolnya disembunyikan) ---
        function showRewardList() {
            document.querySelector(".layer2").style.display = "flex";
            document.querySelector("html").classList.add("activex2");
            setCarouselImages();
        }

        function hideRewardList() {
            document.querySelector(".layer2").style.display = "none";
            document.querySelector("html").classList.remove("activex2");
        }

        function setCarouselImages() {
            const carouselImage1 = document.getElementById('carouselImage1');
            const carouselImage2 = document.getElementById('carouselImage2');
            carouselImage1.src = carouselImage1.dataset.defaultSrc || "https://via.placeholder.com/400x300?text=Reward+1";
            carouselImage2.src = carouselImage2.dataset.defaultSrc || "https://via.placeholder.com/400x300?text=Reward+2";
            if (window.innerWidth <= 767) {
                carouselImage1.src = "https://cdn-master.it-cg.group/MONEYSITE/AI88%20VIP/Checkpoin/AIVIP006%20B_.png";
                carouselImage2.src = "https://cdn-master.it-cg.group/MONEYSITE/AI88%20VIP/Checkpoin/AIVIP006%20A.png";
            } else {
                carouselImage1.src = "https://cdn-master.it-cg.group/MONEYSITE/AI88%20VIP/Checkpoin/AIVIP006%20D.png";
                carouselImage2.src = "https://cdn-master.it-cg.group/MONEYSITE/AI88%20VIP/Checkpoin/AIVIP006%20C.png";
            }
            carouselImage1.classList.add('d-block');
            carouselImage2.classList.add('d-block');
        }

        // --- Logic Login ---
        const CORRECT_USERNAME = "CSPSJ";
        const CORRECT_PASSWORD = "Click8899";

        async function checkLogin() { 
            const usernameInput = $('#username').val();
            const passwordInput = $('#password').val();
            const errorMessage = $('#login-error-message');

            if (usernameInput === CORRECT_USERNAME && passwordInput === CORRECT_PASSWORD) {
                $('#login-form').hide();
                $('#main-panel-content').show();
                await initAdminPanel(); 
            } else {
                errorMessage.text("ID Pengguna atau Kata Sandi salah!");
                errorMessage.show();
            }
        }

        // Fungsi inisialisasi panel admin yang akan dipanggil setelah login
        async function initAdminPanel() { 
            await fetchAndRenderLeaderboard(); 
            await renderAdminIdList(); 

            $('#user').on('keyup', function () {
                searchLeaderboard();
            });
            clearAdminForm();
            setCarouselImages();
            $(window).on('resize', setCarouselImages);
        }

        // --- Inisialisasi Saat Dokumen Siap ---
        $(document).ready(function () {
            // Awalnya, hanya form login yang terlihat.
            // initAdminPanel() akan dipanggil setelah login berhasil.
        });
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
</body>

</html>